\documentclass[oneside,12t]{classes/Thesis}

\usepackage[utf8]{inputenc}
\usepackage{ulem}
\usepackage[english]{babel}

\usepackage{url}
\graphicspath{{img/}}
\DeclareGraphicsExtensions{.pdf,.png}

\usepackage{fixltx2e}


\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{caption}
\usepackage{subfigure}

\title{Un modèle de programmation à grain fin pour la parallélisation de solveurs linéaire creux}


\authorFirstName{Corentin}
\authorLastName{Rossignon}
\authorMail{corentin.rossignon@gmail.com}

\directors{Raymond \textsc{Namyst}}
\codirectors{Olivier \textsc{Aumage} et Samuel \textsc{Thibault}}
\responsables{Pascal \textsc{H\'{e}non}}

\laboratory{LaBRI}
\laboratoryURL{http://www.labri.fr/}
\university{Université de Bordeaux}
\universityURL{http://www.univ-bordeaux.fr/}


\logo{bordeaux1}
\degreeDate{?? ???? 2015}
\degree{Docteur en Informatique}
\degreeSpeciality{Calcul haute performance}

\metadataSetup

% turn of those nasty overfull and underfull hboxes
\hbadness=10000
\hfuzz=50pt

\begin{document}

\dominitoc
\tikzstyle{decision} = [diamond, draw, fill=blue!20,
text width=3em, text centered, node distance=2.5cm, inner sep=0pt,font=\scriptsize]
\tikzstyle{block} = [rectangle, draw, fill=blue!20,
text width=4em, text centered, rounded corners, minimum height=1em,font=\scriptsize]
\tikzstyle{line} = [draw, thick, color=black!50,font=\scriptsize]
\tikzstyle{cloud} = [draw, ellipse,fill=red!20, node distance=2.5cm,
minimum height=0.1em,font=\scriptsize]

\maketitle

%set the number of sectioning levels that get number and appear in the contents
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\frontmatter % book mode only
\pagenumbering{roman}
%\input{src/acknowledgement}
%\input{src/abstract_fr}
%\input{src/abstract_en}
\tableofcontents
\mtcaddchapter
\mainmatter % book mode only



%=========================================================
\chapter{Contexte : simuler l'extraction du pétrole}
\minitoc
\vspace{1cm}
%=========================================================

%+++++++++++++++++++++++++++++++
\section{La simulation de réservoir}
%-------------------------------
\input{src/rs_overview}
%-------------------------------
\input{src/rs_physics_computation}
%-------------------------------
\input{src/rs_simple_example}
%+++++++++++++++++++++++++++++++


%+++++++++++++++++++++++++++++++
\section{Algèbre linéaire}
%-------------------------------
\input{src/la_dense}
%-------------------------------
\input{src/la_sparse}
%+++++++++++++++++++++++++++++++


%+++++++++++++++++++++++++++++++
\section{Résoudre de grands systèmes linéaires creux}
%-------------------------------
\input{src/solve_precond_gmres}
%-------------------------------
\input{src/solve_domain}
%-------------------------------
\input{src/solve_cases}
%+++++++++++++++++++++++++++++++


%+++++++++++++++++++++++++++++++
\section{Architecture cible}
%-------------------------------
\input{src/computer_cluster}
%-------------------------------
\input{src/computer_smp}
%-------------------------------
\input{src/computer_numa}
%-------------------------------
%\input{src/computer_many_core}
%-------------------------------
\input{src/computer_ours}
%+++++++++++++++++++++++++++++++


%+++++++++++++++++++++++++++++++
\section{Parallélisme multi-coeur}
\input{src/mc_intro}
%-------------------------------
\input{src/mc_mpi}
%-------------------------------
\input{src/mc_parallel_for}
%-------------------------------
\input{src/mc_task}
%-------------------------------
\input{src/mc_runtime}
%-------------------------------
\input{src/mc_timeline}
%-------------------------------
\input{src/mc_classification}
%+++++++++++++++++++++++++++++++




%=========================================================
\chapter{Un problème de granularité}
\minitoc
\vspace{1cm}
%=========================================================
%+++++++++++++++++++++++++++++++
\section{Parallelize preconditioned GMRES}
%-------------------------------
\input{src/gmres.tex}
%-------------------------------
\input{src/ilu.tex}
%-------------------------------
%+++++++++++++++++++++++++++++++

%+++++++++++++++++++++++++++++++
\section{Pourquoi la granularité est si importante?}
%-------------------------------
\input{src/granularity_overhead.tex}
%-------------------------------
\input{src/granularity_solution.tex}
%+++++++++++++++++++++++++++++++


%+++++++++++++++++++++++++++++++
\section{Ma solution à notre problème de granularité}
%-------------------------------
\input{src/taggre_taggre.tex}
%-------------------------------
\input{src/taggre_agg.tex}
%-------------------------------
\input{src/taggre_algo_s}
\input{src/taggre_algo_f}
\input{src/taggre_algo_d}
\input{src/taggre_algo_c}
%-------------------------------
\subsection{Examples of strategies}
  \begin{itemize}
    \item Talk about the 7 dwarfs (\url{http://view.eecs.berkeley.edu/wiki/Dwarf_Mine})
  \end{itemize}
%+++++++++++++++++++++++++++++++




%+++++++++++++++++++++++++++++++
\section{Results}
%-------------------------------
\subsection{Factorization and Triangular solve improvement}
  \begin{itemize}
    \item Explain why we benchmark this part
    \item Try a lot of coarse string
  \end{itemize}
%-------------------------------
\subsection{Aggregation overhead}
  \begin{itemize}
    \item Explain why it isn't a real problem
    \item Give some numbers
  \end{itemize}
%-------------------------------
\subsection{Subdomain decomposition}
  \begin{itemize}
    \item Explain why it isn't a real problem
    \item Give some numbers
    \item Talk about bandwidth
  \end{itemize}
%-------------------------------
\subsection{Discussion}
  \begin{itemize}
    \item Compare domain with domain decomposition
  \end{itemize}
%+++++++++++++++++++++++++++++++





%=========================================================
\chapter{Memory bandwidth limitation}
\minitoc
\vspace{1cm}
%=========================================================
\input{src/spmv_slow.tex}
\input{src/numa_management.tex}

%+++++++++++++++++++++++++++++++
\section{Handle NUMA directly in scheduler}
%-------------------------------
\subsection{Status of current scheduler}
  \begin{itemize}
    \item PaRSEC : one vp per NUMA
  \end{itemize}
%-------------------------------
\subsection{NATaS : schedule tasks on NUMA}
  \begin{itemize}
    \item bind task to a processor
    \item allow NUMA work-stealing
    \item bind memory pages
  \end{itemize}
%+++++++++++++++++++++++++++++++


%+++++++++++++++++++++++++++++++
\section{Results}
%-------------------------------
\subsection{Factorization and Triangular solve}
  \begin{itemize}
    \item Support NUMA in tasks
  \end{itemize}
%-------------------------------
\subsection{Sparse matrix vector multiplication}
  \begin{itemize}
    \item problem of SpMV
  \end{itemize}
%-------------------------------
\subsection{First touch}
results
%-------------------------------
\subsection{Interleave}
results
%-------------------------------
\subsection{Automatic NUMA balancing}
  \begin{itemize}
    \item Results on personal machine
    \item very recent kernel
  \end{itemize}
%-------------------------------
\subsection{NATaS}
results
%-------------------------------
\subsection{Discussion}
  \begin{itemize}
    \item Interleave isn't so bad on bi-socket,...
    \item NATaS always give best result
    \item Maybe NATaS isn't the good answer (better scheduler or MPI)
  \end{itemize}
%+++++++++++++++++++++++++++++++


%% %=========================================================
%% \chapter{The fork and join syndrome}
%% \minitoc
%% \vspace{1cm}
%% %=========================================================
%% %+++++++++++++++++++++++++++++++
%% %\section{Data dependencies}
%% %-------------------------------
%% %\subsection{Implicit dependencies}
%% %-------------------------------
%% %\subsection{Explicit dependencies}
%% %+++++++++++++++++++++++++++++++


%% %+++++++++++++++++++++++++++++++
%% \section{The fork and join syndrome}
%% %-------------------------------
%% \subsection{How to see it ?}
%%   \begin{itemize}
%%     \item Show that we have too much synchronization (Paje trace)
%%   \end{itemize}
%% %-------------------------------
%% \subsection{Domain decomposition and overlap}
%%   \begin{itemize}
%%     \item Explain what domain decomposition and overlap is
%%   \end{itemize}
%% %+++++++++++++++++++++++++++++++


%% %+++++++++++++++++++++++++++++++
%% \section{Pipeline GMRES steps}
%%   \begin{itemize}
%%     \item explain the solution to merge graph of task
%%   \end{itemize}
%% %+++++++++++++++++++++++++++++++


%% %+++++++++++++++++++++++++++++++
%% \section{Results}
%% %-------------------------------
%% \subsection{Without MPI}
%%   \begin{itemize}
%%     \item Almost no gain because no many sync
%%   \end{itemize}
%% %-------------------------------
%% \subsection{With MPI}
%%   \begin{itemize}
%%     \item Gain when increase number of MPI process
%%   \end{itemize}
%% %-------------------------------
%% \subsection{Discussion}
%% %+++++++++++++++++++++++++++++++




%=========================================================
\chapter{Conclusions and perspectives}
\minitoc
\vspace{1cm}
%=========================================================
%+++++++++++++++++++++++++++++++
\section{Conclusion}
  \begin{itemize}
    \item Coarsening allow us to parallelize problems with very small computation per task
    \item Improve bandwidth thanks to NUMA architecture
  \end{itemize}
%+++++++++++++++++++++++++++++++


%+++++++++++++++++++++++++++++++
\section{Perspectives}
  \begin{itemize}
    \item Automatic coarse tuning
  \end{itemize}
%+++++++++++++++++++++++++++++++



\backmatter % book mode only
%\bibliographystyle{alpha}
\appendix

\bibliographystyle{annotate}
\bibliography{thesis}
\end{document}
